{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Your Invitation | Wedding Celebration</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;0,500;0,600;1,300;1,400&family=Montserrat:wght@300;400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'css/styles.css' %}">
    <style>
        .invitation-page {
            min-height: 100vh;
            background: linear-gradient(135deg, var(--color-cream) 0%, var(--color-secondary) 50%, var(--color-blush) 100%);
            padding: 40px 20px;
        }
        
        .invitation-container {
            max-width: 800px;
            margin: 0 auto;
        }
        
        .invitation-header {
            background: var(--color-white);
            padding: 50px;
            border-radius: 20px 20px 0 0;
            text-align: center;
            box-shadow: var(--shadow-soft);
        }
        
        .invitation-header h1 {
            font-family: var(--font-heading);
            font-size: 2rem;
            font-weight: 400;
            color: var(--color-text);
            margin-bottom: 10px;
        }
        
        .guest-name {
            font-family: var(--font-heading);
            font-size: 2.5rem;
            font-weight: 500;
            color: var(--color-primary);
            margin: 20px 0;
        }
        
        .invitation-message {
            color: var(--color-text-light);
            font-size: 1.1rem;
            line-height: 1.6;
        }
        
        .party-info {
            background: var(--color-cream);
            padding: 15px 25px;
            border-radius: 10px;
            display: inline-block;
            margin-top: 20px;
        }
        
        .party-info span {
            font-weight: 600;
            color: var(--color-primary);
        }
        
        .invitation-body {
            background: var(--color-white);
            padding: 50px;
            box-shadow: var(--shadow-soft);
        }
        
        .events-invited {
            margin-bottom: 40px;
        }
        
        .events-invited h2 {
            font-family: var(--font-heading);
            font-size: 1.8rem;
            font-weight: 400;
            color: var(--color-text);
            margin-bottom: 25px;
            text-align: center;
        }
        
        .event-rsvp-card {
            background: var(--color-cream);
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 25px;
            border-left: 4px solid var(--color-primary);
        }
        
        .event-rsvp-card.featured {
            border-left-width: 6px;
            background: linear-gradient(135deg, var(--color-secondary) 0%, var(--color-cream) 100%);
        }
        
        .event-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 15px;
        }
        
        .event-icon {
            font-size: 2rem;
        }
        
        .event-name {
            font-family: var(--font-heading);
            font-size: 1.5rem;
            font-weight: 500;
            color: var(--color-text);
        }
        
        .event-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
            font-size: 0.95rem;
            color: var(--color-text-light);
        }
        
        .event-details strong {
            color: var(--color-text);
        }
        
        .rsvp-options {
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid rgba(0,0,0,0.1);
        }
        
        .rsvp-options label {
            font-weight: 500;
            margin-bottom: 10px;
            display: block;
            color: var(--color-text);
        }
        
        .radio-group {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
        }
        
        .radio-option {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 12px 20px;
            background: var(--color-white);
            border-radius: 8px;
            cursor: pointer;
            transition: var(--transition-smooth);
            border: 2px solid transparent;
        }
        
        .radio-option:hover {
            border-color: var(--color-primary-light);
        }
        
        .radio-option input[type="radio"] {
            width: 18px;
            height: 18px;
            accent-color: var(--color-primary);
        }
        
        .radio-option.attending {
            color: #2e7d32;
        }
        
        .radio-option.not-attending {
            color: #c62828;
        }
        
        .guest-count-section {
            margin-top: 15px;
            padding: 15px;
            background: var(--color-white);
            border-radius: 8px;
        }
        
        .guest-count-section label {
            font-size: 0.9rem;
            margin-bottom: 8px;
        }
        
        .guest-count-input {
            width: 80px;
            padding: 10px;
            font-size: 1rem;
            border: 2px solid var(--color-secondary);
            border-radius: 8px;
            text-align: center;
        }
        
        .guest-count-input:focus {
            outline: none;
            border-color: var(--color-primary);
        }
        
        .additional-info {
            margin-top: 40px;
            padding-top: 40px;
            border-top: 2px solid var(--color-secondary);
        }
        
        .additional-info h2 {
            font-family: var(--font-heading);
            font-size: 1.5rem;
            font-weight: 400;
            color: var(--color-text);
            margin-bottom: 25px;
        }
        
        .form-group {
            margin-bottom: 25px;
        }
        
        .form-group label {
            display: block;
            font-size: 0.9rem;
            font-weight: 500;
            color: var(--color-text);
            margin-bottom: 8px;
        }
        
        .form-textarea {
            width: 100%;
            padding: 15px;
            font-family: var(--font-body);
            font-size: 1rem;
            border: 2px solid var(--color-secondary);
            border-radius: 8px;
            resize: vertical;
            min-height: 100px;
        }
        
        .form-textarea:focus {
            outline: none;
            border-color: var(--color-primary);
        }
        
        .invitation-footer {
            background: var(--color-white);
            padding: 40px 50px;
            border-radius: 0 0 20px 20px;
            text-align: center;
            box-shadow: var(--shadow-soft);
        }
        
        .submit-rsvp-btn {
            padding: 18px 60px;
            font-family: var(--font-body);
            font-size: 1rem;
            font-weight: 600;
            letter-spacing: 2px;
            text-transform: uppercase;
            color: var(--color-white);
            background: linear-gradient(135deg, var(--color-primary) 0%, var(--color-primary-dark) 100%);
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: var(--transition-smooth);
        }
        
        .submit-rsvp-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(184, 134, 11, 0.3);
        }
        
        .success-message {
            background: #e8f5e9;
            border: 2px solid #4caf50;
            border-radius: 15px;
            padding: 40px;
            text-align: center;
            margin-bottom: 30px;
        }
        
        .success-message .icon {
            font-size: 4rem;
            margin-bottom: 20px;
        }
        
        .success-message h2 {
            font-family: var(--font-heading);
            font-size: 2rem;
            color: #2e7d32;
            margin-bottom: 15px;
        }
        
        .success-message p {
            color: #1b5e20;
            font-size: 1.1rem;
        }
        
        .back-link {
            display: inline-block;
            margin-top: 20px;
            color: var(--color-primary);
            text-decoration: none;
            font-size: 0.9rem;
        }
        
        .already-responded {
            background: #fff3e0;
            border: 2px solid #ff9800;
            border-radius: 10px;
            padding: 15px 20px;
            margin-bottom: 30px;
            text-align: center;
        }
        
        .already-responded p {
            color: #e65100;
            margin: 0;
        }
        
        @media (max-width: 768px) {
            .invitation-page {
                padding: 20px 15px;
            }
            
            .invitation-header, .invitation-body, .invitation-footer {
                padding: 30px 20px;
            }
            
            .invitation-header h1 {
                font-size: 1.6rem;
            }
            
            .guest-name {
                font-size: 1.8rem;
            }
            
            .invitation-message {
                font-size: 1rem;
            }
            
            .party-info {
                padding: 12px 20px;
                font-size: 0.9rem;
            }
            
            .radio-group {
                flex-direction: column;
                gap: 10px;
            }
            
            .radio-option {
                padding: 15px;
                width: 100%;
                justify-content: flex-start;
            }
            
            .event-details {
                grid-template-columns: 1fr;
                gap: 10px;
            }
            
            .event-rsvp-card {
                padding: 20px;
            }
            
            .event-header {
                gap: 10px;
            }
            
            .event-icon {
                font-size: 1.5rem;
            }
            
            .event-name {
                font-size: 1.3rem;
            }
            
            .events-invited h2 {
                font-size: 1.5rem;
            }
            
            .additional-info h2 {
                font-size: 1.3rem;
            }
            
            .form-textarea {
                font-size: 16px; /* Prevents iOS zoom */
            }
            
            .submit-rsvp-btn {
                padding: 15px 40px;
                font-size: 0.9rem;
            }
        }
        
        @media (max-width: 480px) {
            .invitation-page {
                padding: 15px 10px;
            }
            
            .invitation-header {
                padding: 25px 15px;
                border-radius: 15px 15px 0 0;
            }
            
            .invitation-body {
                padding: 25px 15px;
            }
            
            .invitation-footer {
                padding: 25px 15px;
                border-radius: 0 0 15px 15px;
            }
            
            .invitation-header h1 {
                font-size: 1.4rem;
            }
            
            .guest-name {
                font-size: 1.5rem;
            }
            
            .invitation-message {
                font-size: 0.9rem;
            }
            
            .event-rsvp-card {
                padding: 15px;
                border-radius: 10px;
            }
            
            .event-name {
                font-size: 1.2rem;
            }
            
            .event-details {
                font-size: 0.85rem;
            }
            
            .rsvp-options label {
                font-size: 0.9rem;
            }
            
            .guest-count-section {
                padding: 12px;
            }
            
            .guest-count-section label {
                font-size: 0.85rem;
            }
            
            .form-group label {
                font-size: 0.85rem;
            }
            
            .form-textarea {
                min-height: 80px;
                padding: 12px;
            }
            
            .success-message {
                padding: 30px 20px;
            }
            
            .success-message .icon {
                font-size: 3rem;
            }
            
            .success-message h2 {
                font-size: 1.6rem;
            }
        }
    </style>
</head>
<body>
    <div class="invitation-page">
        <div class="invitation-container">
            {% if rsvp_success %}
            <div class="success-message">
                <div class="icon">‚úì</div>
                <h2>Thank You!</h2>
                <p>Your RSVP has been received. We can't wait to celebrate with you!</p>
                <a href="{% url 'wedding:home' %}" class="back-link">‚Üê Back to Home</a>
            </div>
            {% endif %}
            
            <div class="invitation-header">
                <p class="invitation-message">You are cordially invited to the wedding celebration of</p>
                <h1>
                    {% if wedding_info.partner1_name %}{{ wedding_info.partner1_name }}{% else %}Prit{% endif %}
                    &
                    {% if wedding_info.partner2_name %}{{ wedding_info.partner2_name }}{% else %}Khushboo{% endif %}
                </h1>
                
                <div class="header-divider" style="margin: 25px 0;">
                    <span class="divider-line"></span>
                    <span class="divider-icon">‚ô•</span>
                    <span class="divider-line"></span>
                </div>
                
                <p class="guest-name">{{ guest.name }}</p>
                
                {% if guest.party_name %}
                <div class="party-info">
                    <span>{{ guest.party_name }}</span> ‚Ä¢ Up to {{ guest.max_guests }} guest{{ guest.max_guests|pluralize }}
                </div>
                {% else %}
                <div class="party-info">
                    Up to <span>{{ guest.max_guests }}</span> guest{{ guest.max_guests|pluralize }}
                </div>
                {% endif %}
            </div>
            
            {% if not rsvp_success %}
            <form method="post">
                {% csrf_token %}
                <div class="invitation-body">
                    {% if guest.has_responded %}
                    <div class="already-responded">
                        <p>üìù You have already submitted your RSVP. You can update your response below.</p>
                    </div>
                    {% endif %}
                    
                    <div class="events-invited">
                        <h2>You're Invited To</h2>
                        
                        {% if guest.invited_mendhi %}
                        <div class="event-rsvp-card">
                            <div class="event-header">
                                <span class="event-icon">‚úø</span>
                                <span class="event-name">Mendhi</span>
                            </div>
                            <div class="event-details">
                                <div><strong>Date:</strong> December 25, 2025</div>
                                <div><strong>Time:</strong> 4:00 PM onwards</div>
                                <div><strong>Venue:</strong> The Garden Pavilion</div>
                                <div><strong>Dress Code:</strong> Colorful Indian Attire</div>
                            </div>
                            <div class="rsvp-options">
                                <label>Will you attend?</label>
                                <div class="radio-group">
                                    <label class="radio-option attending">
                                        <input type="radio" name="rsvp_mendhi" value="attending" {% if guest.rsvp_mendhi == 'attending' %}checked{% endif %} required>
                                        <span>Yes, I will attend</span>
                                    </label>
                                    <label class="radio-option not-attending">
                                        <input type="radio" name="rsvp_mendhi" value="not_attending" {% if guest.rsvp_mendhi == 'not_attending' %}checked{% endif %}>
                                        <span>Sorry, I cannot attend</span>
                                    </label>
                                </div>
                                <div class="guest-count-section">
                                    <label>Number of guests attending (max {{ guest.max_guests }}):</label>
                                    <input type="number" name="guests_mendhi" class="guest-count-input" 
                                           value="{{ guest.guests_mendhi|default:1 }}" min="0" max="{{ guest.max_guests }}">
                                </div>
                            </div>
                        </div>
                        {% endif %}
                        
                        {% if guest.invited_vidhi %}
                        <div class="event-rsvp-card">
                            <div class="event-header">
                                <span class="event-icon">ü™î</span>
                                <span class="event-name">Vidhi</span>
                            </div>
                            <div class="event-details">
                                <div><strong>Date:</strong> December 26, 2025</div>
                                <div><strong>Time:</strong> 10:00 AM - 2:00 PM</div>
                                <div><strong>Venue:</strong> Family Residence</div>
                                <div><strong>Dress Code:</strong> Traditional Indian Wear</div>
                            </div>
                            <div class="rsvp-options">
                                <label>Will you attend?</label>
                                <div class="radio-group">
                                    <label class="radio-option attending">
                                        <input type="radio" name="rsvp_vidhi" value="attending" {% if guest.rsvp_vidhi == 'attending' %}checked{% endif %} required>
                                        <span>Yes, I will attend</span>
                                    </label>
                                    <label class="radio-option not-attending">
                                        <input type="radio" name="rsvp_vidhi" value="not_attending" {% if guest.rsvp_vidhi == 'not_attending' %}checked{% endif %}>
                                        <span>Sorry, I cannot attend</span>
                                    </label>
                                </div>
                                <div class="guest-count-section">
                                    <label>Number of guests attending (max {{ guest.max_guests }}):</label>
                                    <input type="number" name="guests_vidhi" class="guest-count-input" 
                                           value="{{ guest.guests_vidhi|default:1 }}" min="0" max="{{ guest.max_guests }}">
                                </div>
                            </div>
                        </div>
                        {% endif %}
                        
                        {% if guest.invited_wedding %}
                        <div class="event-rsvp-card featured">
                            <div class="event-header">
                                <span class="event-icon">üíí</span>
                                <span class="event-name">Wedding Ceremony</span>
                            </div>
                            <div class="event-details">
                                <div><strong>Date:</strong> December 27, 2025</div>
                                <div><strong>Time:</strong> 6:00 PM onwards</div>
                                <div><strong>Venue:</strong> The Grand Ballroom</div>
                                <div><strong>Dress Code:</strong> Formal Indian / Western</div>
                            </div>
                            <div class="rsvp-options">
                                <label>Will you attend?</label>
                                <div class="radio-group">
                                    <label class="radio-option attending">
                                        <input type="radio" name="rsvp_wedding" value="attending" {% if guest.rsvp_wedding == 'attending' %}checked{% endif %} required>
                                        <span>Yes, I will attend</span>
                                    </label>
                                    <label class="radio-option not-attending">
                                        <input type="radio" name="rsvp_wedding" value="not_attending" {% if guest.rsvp_wedding == 'not_attending' %}checked{% endif %}>
                                        <span>Sorry, I cannot attend</span>
                                    </label>
                                </div>
                                <div class="guest-count-section">
                                    <label>Number of guests attending (max {{ guest.max_guests }}):</label>
                                    <input type="number" name="guests_wedding" class="guest-count-input" 
                                           value="{{ guest.guests_wedding|default:1 }}" min="0" max="{{ guest.max_guests }}">
                                </div>
                            </div>
                        </div>
                        {% endif %}
                        
                        {% if guest.invited_reception %}
                        <div class="event-rsvp-card">
                            <div class="event-header">
                                <span class="event-icon">üéâ</span>
                                <span class="event-name">Reception</span>
                            </div>
                            <div class="event-details">
                                <div><strong>Date:</strong> December 28, 2025</div>
                                <div><strong>Time:</strong> 7:00 PM onwards</div>
                                <div><strong>Venue:</strong> Starlight Terrace</div>
                                <div><strong>Dress Code:</strong> Glamorous Evening Wear</div>
                            </div>
                            <div class="rsvp-options">
                                <label>Will you attend?</label>
                                <div class="radio-group">
                                    <label class="radio-option attending">
                                        <input type="radio" name="rsvp_reception" value="attending" {% if guest.rsvp_reception == 'attending' %}checked{% endif %} required>
                                        <span>Yes, I will attend</span>
                                    </label>
                                    <label class="radio-option not-attending">
                                        <input type="radio" name="rsvp_reception" value="not_attending" {% if guest.rsvp_reception == 'not_attending' %}checked{% endif %}>
                                        <span>Sorry, I cannot attend</span>
                                    </label>
                                </div>
                                <div class="guest-count-section">
                                    <label>Number of guests attending (max {{ guest.max_guests }}):</label>
                                    <input type="number" name="guests_reception" class="guest-count-input" 
                                           value="{{ guest.guests_reception|default:1 }}" min="0" max="{{ guest.max_guests }}">
                                </div>
                            </div>
                        </div>
                        {% endif %}
                    </div>
                    
                    <div class="additional-info">
                        <h2>Additional Information</h2>
                        
                        <div class="form-group">
                            <label for="dietary_requirements">Dietary Requirements</label>
                            <textarea name="dietary_requirements" id="dietary_requirements" class="form-textarea"
                                      placeholder="Please let us know of any dietary requirements or allergies">{{ guest.dietary_requirements }}</textarea>
                        </div>
                        
                        <div class="form-group">
                            <label for="message">Message for the Couple</label>
                            <textarea name="message" id="message" class="form-textarea"
                                      placeholder="Share your wishes or a message for us">{{ guest.message }}</textarea>
                        </div>
                    </div>
                </div>
                
                <div class="invitation-footer">
                    <button type="submit" class="submit-rsvp-btn">Submit RSVP</button>
                    <br>
                    <a href="{% url 'wedding:home' %}" class="back-link">‚Üê Back to Home</a>
                </div>
            </form>
            {% endif %}
        </div>
    </div>
</body>
</html>

